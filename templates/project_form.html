{% extends "base.html" %}

{% block title %}Add New Project - Gautham{% endblock %}

{% block content %}
<section class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <a href="{{ url_for('projects') }}" class="btn btn-outline-primary mb-4">‚Üê Back to Projects</a>

                <div class="bg-white rounded-4 shadow-sm p-4 p-md-5">
                    <h1 class="mb-4 text-center">Add New Project</h1>

                    <form action="{{ url_for('project_new') }}" method="post" enctype="multipart/form-data" id="projectForm" class="needs-validation" novalidate>
                        <div class="mb-4">
                            <label for="title" class="form-label">Title *</label>
                            <input
                                type="text"
                                class="form-control"
                                id="title"
                                name="title"
                                required
                                placeholder="Enter project title">
                            <div class="invalid-feedback">
                                Please provide a project title.
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="description" class="form-label">Description *</label>
                            <textarea
                                class="form-control"
                                id="description"
                                name="description"
                                rows="5"
                                required
                                placeholder="Describe your project..."></textarea>
                            <div class="invalid-feedback">
                                Please provide a project description.
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="image" class="form-label">Project Image *</label>
                            <input
                                type="file"
                                class="form-control"
                                id="image"
                                name="image"
                                accept="image/*"
                                required>
                            <div class="form-text">Allowed formats: PNG, JPG, JPEG, GIF, WEBP (Max 5MB)</div>
                            <div class="invalid-feedback">
                                Please select an image file.
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                            <button type="submit" class="btn btn-primary btn-lg px-5">Add Project</button>
                            <a href="{{ url_for('projects') }}" class="btn btn-outline-secondary btn-lg px-5">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Form validation
    (function () {
        'use strict'
        const form = document.getElementById('projectForm')

        form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }

            form.classList.add('was-validated')
        }, false)
    })()
</script>
{% endblock %}
